<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Blokz Reflex - Mode Local Partage</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100%; background: #121212; color: #eee; font-family: Arial, sans-serif;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
  }
  .page {
    display: none;
    width: 100vw; height: 100vh;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  .active {
    display: flex !important;
  }
  button {
    background: #00ffc8; border: none; padding: 15px 30px; margin: 15px; border-radius: 10px;
    font-weight: bold; font-size: 1.2rem; color: #000; cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #00e0b0;
  }

  /* Ecran partage */
  #localGame {
    display: none;
    flex-direction: row;
    height: 100vh;
    width: 100vw;
  }
  #player1Area, #player2Area {
    flex: 1;
    position: relative;
    background: #222;
    border: 3px solid #00ffc8;
    margin: 5px;
    border-radius: 15px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #player2Area {
    border-color: #ff6a6a;
  }
  h2 {
    margin: 15px 0 10px 0;
    user-select: none;
  }
  .gameArea {
    flex: 1;
    width: 90%;
    position: relative;
    background: #111;
    border-radius: 10px;
    overflow: hidden;
  }
  .block {
    position: absolute;
    width: 60px;
    height: 60px;
    border-radius: 10px;
    cursor: pointer;
    transition: transform 0.15s ease;
  }
  .block:hover {
    transform: scale(1.3);
  }
  .red { background: #e74c3c; }
  .blue { background: #3498db; }
  .green { background: #2ecc71; }
  .yellow { background: #f1c40f; }

  .scoreboard {
    margin: 10px 0 15px 0;
    font-size: 1.3rem;
    user-select: none;
  }
  #quitBtn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #00ffc8;
    border: none;
    padding: 10px 20px;
    border-radius: 12px;
    font-weight: bold;
    color: #000;
    cursor: pointer;
    user-select: none;
    z-index: 10;
  }
</style>
</head>
<body>

<!-- MENU -->
<div id="menu" class="page active">
  <h1>Blokz Reflex</h1>
  <button id="btnLocal">Mode Local</button>
</div>

<!-- ECRAN PARTAGE -->
<div id="localGame" class="page">
  <button id="quitBtn">Quitter</button>
  <div id="player1Area">
    <h2>Joueur 1</h2>
    <div id="gameArea1" class="gameArea"></div>
    <div class="scoreboard" style="color:#00ffc8;">
      ‚ù§Ô∏è <span id="lives1">3</span> | üèÜ <span id="trophies1">0</span> | Score: <span id="score1">0</span>
    </div>
  </div>
  <div id="player2Area">
    <h2>Joueur 2</h2>
    <div id="gameArea2" class="gameArea"></div>
    <div class="scoreboard" style="color:#ff6a6a;">
      ‚ù§Ô∏è <span id="lives2">3</span> | üèÜ <span id="trophies2">0</span> | Score: <span id="score2">0</span>
    </div>
  </div>
</div>

<script>
  const pages = ['menu', 'localGame'];
  const btnLocal = document.getElementById('btnLocal');
  const quitBtn = document.getElementById('quitBtn');
  const localGame = document.getElementById('localGame');

  // Variables jeu local
  let timers = [null, null];
  let lives = [3,3];
  let scores = [0,0];
  let trophies = [0,0];
  const colors = ['red','blue','green','yellow'];
  const blockDuration = 2000; // dur√©e du bloc avant disparition (ms)

  btnLocal.onclick = () => {
    switchPage('localGame');
    startLocalGame();
  };

  quitBtn.onclick = () => {
    stopLocalGame();
    switchPage('menu');
  };

  function switchPage(pageId) {
    pages.forEach(p => {
      document.getElementById(p).classList.remove('active');
    });
    document.getElementById(pageId).classList.add('active');
  }

  function startLocalGame() {
    lives = [3,3];
    scores = [0,0];
    trophies = [0,0];
    updateUI();
    clearAreas();
    spawnBlock(0);
    spawnBlock(1);
  }

  function stopLocalGame() {
    timers.forEach(t => clearTimeout(t));
    clearAreas();
  }

  function clearAreas() {
    document.getElementById('gameArea1').innerHTML = '';
    document.getElementById('gameArea2').innerHTML = '';
  }

  function updateUI() {
    document.getElementById('lives1').textContent = lives[0];
    document.getElementById('trophies1').textContent = trophies[0];
    document.getElementById('score1').textContent = scores[0];
    document.getElementById('lives2').textContent = lives[1];
    document.getElementById('trophies2').textContent = trophies[1];
    document.getElementById('score2').textContent = scores[1];
  }

  function spawnBlock(playerIndex) {
    const area = document.getElementById('gameArea' + (playerIndex+1));
    area.innerHTML = '';

    const block = document.createElement('div');
    const color = colors[Math.floor(Math.random()*colors.length)];
    block.className = 'block ' + color;

    // Position al√©atoire dans la zone de jeu
    const maxTop = area.clientHeight - 60;
    const maxLeft = area.clientWidth - 60;
    const top = Math.random() * maxTop;
    const left = Math.random() * maxLeft;
    block.style.top = top + 'px';
    block.style.left = left + 'px';

    block.onclick = () => {
      scores[playerIndex]++;
      trophies[playerIndex]++;
      updateUI();
      clearTimeout(timers[playerIndex]);
      spawnBlock(playerIndex);
    };

    area.appendChild(block);

    // Timer disparition
    timers[playerIndex] = setTimeout(() => {
      lives[playerIndex]--;
      updateUI();
      if(lives[playerIndex] <= 0){
        alert(`Joueur ${playerIndex+1} a perdu !\nScores:\nJoueur 1 : ${scores[0]}\nJoueur 2 : ${scores[1]}`);
        stopLocalGame();
        switchPage('menu');
        return;
      }
      spawnBlock(playerIndex);
    }, blockDuration);
  }
</script>

</body>
</html>













